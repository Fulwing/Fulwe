<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
   <head>
      <!-- Required meta tags -->
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <title>User Profile | Fulwe</title>
      <!-- Favicon -->
      <link rel="icon" type="image/x-icon" th:href="@{/img/favicon.ico}">
      <!-- Bootstrap CSS -->
      <link rel="stylesheet" th:href="@{/plugins/bootstrap/css/bootstrap.min.css}">
      <!-- Linearicon Font -->
      <link rel="stylesheet" th:href="@{/plugins/linearicon/css/lnr-icon.css}">
      <!-- FontAwesome Free Font -->
      <link rel="stylesheet" th:href="@{/plugins/fontawesome/css/font-awesome.min.css}">
      <!-- Custom CSS -->
      <link rel="stylesheet" th:href="@{/css/style.css}">
      <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
      <style>
         /* Discord background color */
         .bg-discord {
            background-color: #7289da; /* Discord's color */
         }

         /* Snapchat background color */
         .bg-snapchat {
            background-color: #ffea00; /* Dimmer Snapchat color */
         }
         /* Instagram background color */
         .bg-instagram {
            background-color: #e4405f; /* Instagram's color */
         }
         .bg-nothing{
            background-color: #000000;
         }
      </style>
      <!--[if lt IE 9]>
      <script src="assets/js/html5shiv.min.js"></script>
      <script src="assets/js/respond.min.js"></script>
      <![endif]-->
   </head>
   <body>
      <!-- Inner Wrapper -->
      <div class="inner-wrapper">
         <!-- Header -->
         <header>
            <!-- Top Header Section -->
            <!-- /Top Header Section -->
            <!-- Main header Section -->
            <div class="main-header-section">
               <div class="container">
                  <div class="row align-items-center">
                     <div class="col-12">
                        <!-- Main Menu -->
                        <div class="main-menu menu-section w-100 d-inline-block d-md-block">
                                 <!-- offcanvas menu -->
                                 <!-- /offcanvas menu -->

                                 <!-- Navbar menu-->
                                 <nav th:replace="index/index::navbar" class="navbar navbar-expand-lg p-0">

                                 </nav>
                                 <!-- /Navbar menu-->
                              </div>
                        <!-- /Main Menu -->
                     </div>
                  </div>
               </div>
            </div>

            <!-- /Main Header Section -->
         </header>
         <!-- /Header -->
         <!-- Header Banner Section -->
         <section class="slider-wrapper py-5">
            <div class="container">
               <div class="row">
                  <div class="col-12 text-center">
                     <div class="inner-banner-heading py-0 py-md-3 py-lg-5">
                        <h1 class="text-white">User Profile</h1>
                     </div>
                  </div>
               </div>
            </div>
         </section>
         <!-- /Header Banner Section -->
         <!-- Bread crumb -->
         <div class="breadcrumb-wrapper bg-theme py-2">
               <div class="container">
                        <div class="row">
                           <div class="col-md-12">
                                 <div class="custom-breadcrumb">
                                    <ol class="breadcrumb no-bg-color p-0 m-0">
                                       <li class="breadcrumb-item d-inline-block"><a href="/" class="text-theme-secondary">Home</a></li>
                                       <li class="breadcrumb-item d-inline-block active">User Profile</li>
                                    </ol>
                                 </div>
                           </div>
                        </div>
               </div>   
               </div>    
         <!-- /Bread crumb -->   
         <!-- User Profile -->
         <div class="user-profile-wrapper py-5 ">
            <div class="container">
               <div class="row">
                  <div class="col-lg-4 col-md-12">
                     <aside class="sidebar sidebar-user">
                        <div class="user-card shadow border p-4">
                           <div class="user-info">
                              <div class="user-avatar text-center mb-4">
                                 <img th:src="'data:image/jpeg;base64,' + ${session.profilepic}" alt="User Avatar" class="position-relative img-fluid rounded-circle" style="object-fit: cover; object-position: center center; width: 100px; height: 100px;">
                                 <a href="/dashboard/setting">
                                    <span class="badge badge-info bg-theme rounded-circle position-absolute p-2 ml-n3 border-white text-white"><i class="fa fa-cog display-6"></i></span>
                                 </a>
                              </div>
                              <div class="user-details text-center">
                                 <h4>[[${name}]]</h4>
                              </div>
                              <div class="my-wallet-blk text-center my-4">
                              <span class="border-theme radius-5 d-inline-block px-4 py-2 mt-0 mb-4 text-theme">
                                 My Wallet
                              </span>
                                    <div class="align-items-center">
                                       <span class="text-center "><i class="fa fa-usd"></i>&nbsp;[[${balance}]]</span>
                                    </div>
                              </div>
                           </div>
                        </div>
                        <div class="quicklink-sidebar-menu shadow border mt-4 p-4">
                           <div class="user-title-info">
                              <h4>Connect with me</h4>
                           </div>
                           <hr class="m-4">
                           <ul class="list-group border-0" th:if="${info != null}">
                              <li class="list-group-item border-0 p-0 mb-2" th:if="${info.getInstagram() != null}">
                                 <div class="bg-instagram px-3 py-1">
                                    <a class="text-white display-5" th:href="@{${info.getInstagram()}}">
                                       <i class="fab fa-instagram"></i>
                                       <h5 class="d-inline-block ml-5">Connect with me</h5>
                                    </a>
                                 </div>
                              </li>
                              <li class="list-group-item border-0 p-0 mb-2" th:if="${info.getDiscord() != null}">
                                 <div class="bg-discord px-3 py-1">
                                    <a class="text-white display-5" href="https://discord.com/">
                                       <i class="fab fa-discord"></i>
                                       <h5 class="d-inline-block ml-5" th:text="${info.getDiscord()}"></h5>
                                    </a>
                                 </div>
                              </li>
                              <li class="list-group-item border-0 p-0 mb-2" th:if="${info.getSnapchat() != null}">
                                 <div class="bg-snapchat px-3 py-1">
                                    <a class="text-white display-5" th:href="@{${info.getSnapchat()}}">
                                       <i class="fab fa-snapchat-ghost"></i>
                                       <h5 class="d-inline-block ml-5">Connect with me</h5>
                                    </a>
                                 </div>
                              </li>
                           </ul>

                           <div class="bg-nothing px-3 py-1" th:if="${info == null}">
                              <a class="text-white display-5" >
                                 <i class="fa fa-frown-o" aria-hidden="true"></i>
                                 <h5 class="d-inline-block ml-5">No Account Added</h5>
                              </a>
                           </div>
                        </div>
                     </aside>
                  </div>
                  <div class="col-lg-8 col-md-12 mt-5 mt-md-5 mt-lg-0">
                     <div class="custom-border-left rounded shadow border p-4 bg-white mb-4 stg-title">
                        <div class="row align-items-center">
                           <div class="col-6">
                              <h3 class="text-capitalize">My Services</h3>
                           </div>
                           <div class="col-6 text-right">
                              <a th:href="@{/shop/addcommodity}" class="d-inline-block btn btn-style radius-5 text-white btn-sm px-4 py-2 ">Add Service</a>
                           </div>
                        </div>
                     </div>
                     <div class="recent-pdt-items mt-4">
                        <div class="row">
                           <div th:if="${not #lists.isEmpty(commodities)}" th:each="commodity, eee: ${commodities}" class="col-md-6 pdt card-deck mx-0 mb-4">
                              <div class="card shadow mx-0">
                                 <div class="card-image">
                                    <img class="card-img-top" th:src="'data:image/jpeg;base64,' + ${pictures[eee.index]}" alt="Card image">
                                    <div class="image-overlay">
                                       <a th:href="@{/shop/item/{itemId}(itemId=${commodity.getItemId()})}" class="btn btn-outline-white radius-5 py-3 px-4  text-capitalize">More Info</a>
                                    </div>
                                 </div>
                                 <div class="card-body p-3">
                                    <h4 class="card-title mb-0"><a href="single-product.html" class="text-link">[[${commodity.getItemName()}]]</a></h4>
                                    <div class="card-text">
                                       <div class="card-section-1 py-3">
                                          <div class="row align-items-center">
                                             <div class="col-6">
                                                <div class="media align-items-center">
                                                   <a href="/dashboard/profile" class="text-link d-inline-block">
                                                      <img th:src="'data:image/jpeg;base64,' + ${session.profilepic}" alt="User Avatar" class="position-relative img-fluid rounded-circle" style="object-fit: cover; object-position: center center; width: 50px; height: 50px;">
                                                      <div class="media-body d-inline-block">
                                                         <p><strong>[[${name}]]</strong></p>
                                                      </div>
                                                   </a>
                                                </div>
                                             </div>
                                             <div class="col-6">
                                                <div class="pdt-cat-tag text-right">
                                                   <span class="bg-theme text-white px-3 py-1 radius-5">[[${commodity.getItemGroup()}]]</span>
                                                </div>
                                             </div>
                                          </div>
                                       </div>
                                       <div class="card-section-2">
                                          <div class="row align-items-center">
                                             <div class="pdt-contact-btn text-right">
                                                <span class="p-2 display-5">
                                                   <a href="javascript:;">
                                                      <span class="lnr lnr-cog"></span>
                                                   </a>
                                                </span>
                                                <span class="p-2 display-5">
                                                   <a href="javascript:;" th:onclick="'confirmDelete(' + ${commodity.getItemId()} + ')'" >
                                                       <span class="lnr lnr-trash"></span>
                                                   </a>
                                                </span>
                                             </div>
                                          </div>
                                       </div>
                                       <div class="card-section-3 py-3">
                                          <div class="row">
                                             <div class="col-12">
                                                <div class="pdt-description">
                                                   <p>[[${commodity.getItemIntro()}]]</p>
                                                </div>
                                             </div>
                                          </div>
                                       </div>
                                       <hr class="mt-0">
                                       <div class="card-section-4">
                                          <div class="row">
                                          <div class="col-12">
                                             <div class="pdt-add-to-cart text-center">
                                                   <span class="border-theme radius-5 d-block px-5 py-1 text-theme display-6">
                                                      <i class="fa fa-usd"></i>&nbsp;[[${commodity.getItemPrice()}]]
                                                   </span>
                                             </div>
                                          </div>
                                          </div>
                                       </div>
                                    </div>
                                 </div>
                              </div>
                           </div>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
         </div>
         <!-- Footer -->
         <footer th:replace="index/index::footer">

         </footer>
         <!-- /Footer -->

      <!-- Modal -->
      <div class="modal fade" id="deleteModal" tabindex="-1" role="dialog" aria-labelledby="deleteModalLabel" aria-hidden="true">
         <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
               <div class="modal-header">
                  <h5 class="modal-title" id="deleteModalLabel">Confirm Delete</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                     <span aria-hidden="true">&times;</span>
                  </button>
               </div>
               <div class="modal-body">
                  <!-- Notification content goes here -->
                  <p>Do you really want to delete this item?</p>
               </div>
               <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-dismiss="modal">No</button>
                  <button type="button" class="btn btn-danger" onclick="deleteItem(${commodity.getItemId()})">Delete</button>
               </div>
            </div>
         </div>
      </div>
      <!-- Inner Wrapper -->
      <!-- Optional JavaScript -->
      <script>
            function confirmDelete(itemId) {
               $('#deleteModal').modal('show'); // Show the modal
            }
            function deleteItem(itemId) {
               // Perform the delete action here
               // You can send a GET request to the /shop/deleteitem endpoint with the item's ID
               $.get(`/shop/deleteitem/${itemId}`, function(data) {
                  // Check for the presence of an "error" message in the response
                  if (data.error) {
                     // Handle the error case
                     alert('Error: ' + data.error);
                  } else {
                     // Handle the success case
                     alert('Item deleted successfully.');
                  }
               }).fail(function() {
                  // Handle the failure, e.g., show an error message
                  alert('Failed to delete item.'); // For demonstration purposes
               }).always(function() {
                  $('#deleteModal').modal('hide'); // Hide the modal
               });
            }
      </script>
      <!-- jQuery -->
      <script th:src="@{/js/jquery.min.js}"></script>
      <!-- Bootstrap Core JS -->
      <script th:src="@{/js/popper.min.js}"></script>
      <script th:src="@{/plugins/bootstrap/js/bootstrap.min.js}"></script>
      <!-- Custom JS -->
      <script th:src="@{/js/script.js}"></script>
   </body>
</html>